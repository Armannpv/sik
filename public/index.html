<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real Crypto Wallet - Ú©ÛŒÙ Ù¾ÙˆÙ„ ÙˆØ§Ù‚Ø¹ÛŒ</title>
    <style>
        :root {
            --primary: #1e40af;
            --secondary: #3b82f6;
            --success: #10b981;
            --danger: #ef4444;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: system-ui; }
        body { background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%); min-height: 100vh; padding: 20px; color: #333; }
        .container { max-width: 1200px; margin: 0 auto; }
        .header { text-align: center; color: white; padding: 30px 0; }
        .logo { font-size: 60px; margin-bottom: 15px; }
        .site-title { font-size: 2.5rem; font-weight: 800; margin-bottom: 10px; }
        .auth-section, .main-section { background: white; border-radius: 20px; padding: 40px; margin-bottom: 30px; }
        .main-section { display: none; }
        .form-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; font-weight: 600; }
        input, select, button { width: 100%; padding: 15px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 16px; margin-bottom: 10px; }
        button { background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%); color: white; border: none; cursor: pointer; font-weight: 600; }
        button:hover { transform: translateY(-2px); }
        .balance-cards { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .balance-card { background: linear-gradient(135deg, #8b5cf6 0%, #a855f7 100%); color: white; padding: 25px; border-radius: 15px; text-align: center; }
        .balance-amount { font-size: 2rem; font-weight: 800; margin: 10px 0; }
        .real-badge { background: var(--success); color: white; padding: 5px 10px; border-radius: 10px; font-size: 0.8rem; }
        .alert { padding: 15px; border-radius: 10px; margin: 10px 0; }
        .alert-success { background: #dcfce7; color: #166534; }
        .alert-error { background: #fee2e2; color: #991b1b; }
        .loading { display: none; text-align: center; padding: 40px; }
        .spinner { border: 4px solid #f3f4f6; border-top: 4px solid #3b82f6; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; margin: 0 auto 20px; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">ğŸ’</div>
            <h1 class="site-title">Real Crypto Wallet</h1>
            <p>Ú©ÛŒÙ Ù¾ÙˆÙ„ ÙˆØ§Ù‚Ø¹ÛŒ Ø¨Ø§ Ø§Ù†ØªÙ‚Ø§Ù„ REAL - Ø´Ø¨Ú©Ù‡ ØªØ³Øªâ€ŒÙ†Øª</p>
        </div>

        <div class="auth-section" id="authSection">
            <h2 style="text-align: center; margin-bottom: 30px;">ğŸ” Ø§ÛŒØ¬Ø§Ø¯ Ú©ÛŒÙ Ù¾ÙˆÙ„ REAL</h2>
            <button onclick="createWallet()" style="font-size: 1.2rem; padding: 18px;">
                ğŸ’ Ø§ÛŒØ¬Ø§Ø¯ Ú©ÛŒÙ Ù¾ÙˆÙ„ REAL
            </button>
            <div style="margin-top: 20px; padding: 15px; background: #f0f9ff; border-radius: 10px;">
                <h3>ğŸ Ø§Ù…Ú©Ø§Ù†Ø§Øª REAL:</h3>
                <p>â€¢ Ø§Ù†ØªÙ‚Ø§Ù„ ÙˆØ§Ù‚Ø¹ÛŒ Ø§ØªØ±ÛŒÙˆÙ… Ùˆ BNB</p>
                <p>â€¢ Ù¾Ø§Ø¯Ø§Ø´â€ŒÙ‡Ø§ÛŒ ÙˆØ§Ù‚Ø¹ÛŒ RWD Token</p>
                <p>â€¢ Ø´Ø¨Ú©Ù‡ ØªØ³Øªâ€ŒÙ†Øª (Ø±Ø§ÛŒÚ¯Ø§Ù†)</p>
                <p>â€¢ Ù…Ø´Ø§Ù‡Ø¯Ù‡ ØªØ±Ø§Ú©Ù†Ø´ Ø¯Ø± Explorer</p>
            </div>
        </div>

        <div class="main-section" id="mainSection">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
                <div>
                    <h2>ğŸ’° Ú©ÛŒÙ Ù¾ÙˆÙ„ REAL Ø´Ù…Ø§ <span class="real-badge">REAL</span></h2>
                    <p id="walletAddress" style="color: #6b7280; font-family: monospace;"></p>
                </div>
                <div style="display: flex; gap: 10px;">
                    <button onclick="claimBonus()" style="width: auto; background: var(--success); padding: 10px 20px;">
                        ğŸ Ø¯Ø±ÛŒØ§ÙØª Ù¾Ø§Ø¯Ø§Ø´
                    </button>
                    <button onclick="logout()" style="width: auto; background: var(--danger); padding: 10px 20px;">
                        ğŸšª Ø®Ø±ÙˆØ¬
                    </button>
                </div>
            </div>

            <div class="balance-cards">
                <div class="balance-card">
                    <h3>ğŸ”· Ø§ØªØ±ÛŒÙˆÙ… <span class="real-badge">REAL</span></h3>
                    <div class="balance-amount" id="ethBalance">0</div>
                    <div>Ø´Ø¨Ú©Ù‡ ØªØ³Øªâ€ŒÙ†Øª</div>
                </div>
                <div class="balance-card" style="background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);">
                    <h3>ğŸ’› BNB <span class="real-badge">REAL</span></h3>
                    <div class="balance-amount" id="bnbBalance">0</div>
                    <div>Ø´Ø¨Ú©Ù‡ ØªØ³Øªâ€ŒÙ†Øª</div>
                </div>
                <div class="balance-card" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);">
                    <h3>â‚¿ Ø¨ÛŒØªâ€ŒÚ©ÙˆÛŒÙ†</h3>
                    <div class="balance-amount" id="btcBalance">0</div>
                    <div>Ù¾Ø§Ø¯Ø§Ø´ ØªØ³Øª</div>
                </div>
                <div class="balance-card" style="background: linear-gradient(135deg, #059669 0%, #047857 100%);">
                    <h3>ğŸ¯ RWD Token</h3>
                    <div class="balance-amount" id="rwdBalance">0</div>
                    <div>ØªÙˆÚ©Ù† Ù¾Ø§Ø¯Ø§Ø´</div>
                </div>
            </div>

            <div style="background: #f8fafc; padding: 25px; border-radius: 15px; margin-bottom: 20px;">
                <h3>ğŸ“¤ Ø§Ù†ØªÙ‚Ø§Ù„ REAL</h3>
                <select id="transferCurrency">
                    <option value="ETH">Ø§ØªØ±ÛŒÙˆÙ… (ETH) - ØªØ³Øªâ€ŒÙ†Øª</option>
                    <option value="BNB">BNB - ØªØ³Øªâ€ŒÙ†Øª</option>
                </select>
                <input type="text" id="toAddress" placeholder="Ø¢Ø¯Ø±Ø³ Ù…Ù‚ØµØ¯" dir="ltr">
                <input type="number" id="transferAmount" placeholder="Ù…Ø¨Ù„Øº" step="0.000001">
                <input type="password" id="privateKey" placeholder="Ú©Ù„ÛŒØ¯ Ø®ØµÙˆØµÛŒ REAL" dir="ltr">
                <select id="networkType">
                    <option value="testnet">Ø´Ø¨Ú©Ù‡ ØªØ³Øª (Testnet) - Ø±Ø§ÛŒÚ¯Ø§Ù†</option>
                    <option value="mainnet">Ø´Ø¨Ú©Ù‡ Ø§ØµÙ„ÛŒ (Mainnet) - ÙˆØ§Ù‚Ø¹ÛŒ</option>
                </select>
                <button onclick="transferReal()">âš¡ Ø§Ù†ØªÙ‚Ø§Ù„ REAL</button>
            </div>

            <div style="background: #fffbeb; padding: 20px; border-radius: 15px; border: 2px solid #f59e0b;">
                <h3>ğŸ’¡ Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ REAL:</h3>
                <p>1. Ø§Ø¨ØªØ¯Ø§ Ø§Ø² faucet Ø§ØªØ± Ø±Ø§ÛŒÚ¯Ø§Ù† Ø¯Ø±ÛŒØ§ÙØª Ú©Ù†ÛŒØ¯: <a href="https://goerli-faucet.pk910.de" target="_blank">Goerli Faucet</a></p>
                <p>2. Ø§Ù†ØªÙ‚Ø§Ù„â€ŒÙ‡Ø§ Ø¯Ø± ØªØ³Øªâ€ŒÙ†Øª ÙˆØ§Ù‚Ø¹ÛŒ Ù‡Ø³ØªÙ†Ø¯ Ùˆ Ø¯Ø± Explorer Ù‚Ø§Ø¨Ù„ Ù…Ø´Ø§Ù‡Ø¯Ù‡</p>
                <p>3. Ø¨Ø±Ø§ÛŒ Ø´Ø¨Ú©Ù‡ Ø§ØµÙ„ÛŒØŒ Ø¨Ø§ÛŒØ¯ Ø§Ø±Ø² ÙˆØ§Ù‚Ø¹ÛŒ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´ÛŒØ¯</p>
            </div>

            <div id="alertContainer" style="margin-top: 20px;"></div>
        </div>

        <div class="loading" id="loadingSection">
            <div class="spinner"></div>
            <p id="loadingText">Ø¯Ø± Ø­Ø§Ù„ Ù¾Ø±Ø¯Ø§Ø²Ø´...</p>
        </div>
    </div>

    <script>
        const API_BASE = '/api';
        
        async function createWallet() {
            showLoading(true, 'Ø¯Ø± Ø­Ø§Ù„ Ø§ÛŒØ¬Ø§Ø¯ Ú©ÛŒÙ Ù¾ÙˆÙ„ REAL...');
            try {
                const response = await fetch(`${API_BASE}/wallet/create`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' }
                });
                const data = await response.json();
                if (data.success) {
                    localStorage.setItem('walletAddress', data.wallet.address);
                    localStorage.setItem('privateKey', data.wallet.privateKey);
                    showAlert(
                        `ğŸ‰ Ú©ÛŒÙ Ù¾ÙˆÙ„ REAL Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯!<br>
                         <strong>Ø¢Ø¯Ø±Ø³:</strong> ${data.wallet.address}<br>
                         <strong>Ú©Ù„ÛŒØ¯ Ø®ØµÙˆØµÛŒ:</strong> ${data.wallet.privateKey}<br>
                         ğŸ’¡ Ø¨Ø±Ø§ÛŒ Ø´Ø±ÙˆØ¹: Ø§Ø² faucet Ø§ØªØ± Ø±Ø§ÛŒÚ¯Ø§Ù† Ø¯Ø±ÛŒØ§ÙØª Ú©Ù†ÛŒØ¯`,
                        'success'
                    );
                    showMainSection();
                    loadWalletData();
                } else {
                    throw new Error(data.error);
                }
            } catch (error) {
                showAlert('Ø®Ø·Ø§: ' + error.message, 'error');
            }
            showLoading(false);
        }

        async function loadWalletData() {
            const address = localStorage.getItem('walletAddress');
            if (!address) return;
            
            showLoading(true, 'Ø¯Ø±ÛŒØ§ÙØª Ù…ÙˆØ¬ÙˆØ¯ÛŒ REAL...');
            try {
                const response = await fetch(`${API_BASE}/balance/${address}`);
                const data = await response.json();
                if (data.success) {
                    document.getElementById('ethBalance').textContent = data.balances.ETH?.toFixed(6) || '0';
                    document.getElementById('bnbBalance').textContent = data.balances.BNB?.toFixed(6) || '0';
                    document.getElementById('btcBalance').textContent = data.balances.BTC?.toFixed(6) || '0';
                    document.getElementById('rwdBalance').textContent = data.balances.RWD?.toFixed(2) || '0';
                    document.getElementById('walletAddress').textContent = address;
                }
            } catch (error) {
                showAlert('Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ù…ÙˆØ¬ÙˆØ¯ÛŒ', 'error');
            }
            showLoading(false);
        }

        async function transferReal() {
            const currency = document.getElementById('transferCurrency').value;
            const toAddress = document.getElementById('toAddress').value;
            const amount = parseFloat(document.getElementById('transferAmount').value);
            const privateKey = document.getElementById('privateKey').value;
            const networkType = document.getElementById('networkType').value;
            const fromAddress = localStorage.getItem('walletAddress');

            if (!toAddress || !amount || !privateKey) {
                return showAlert('Ù„Ø·ÙØ§ ØªÙ…Ø§Ù… ÙÛŒÙ„Ø¯Ù‡Ø§ Ø±Ø§ Ù¾Ø± Ú©Ù†ÛŒØ¯', 'error');
            }

            if (networkType === 'mainnet') {
                if (!confirm('âš ï¸ Ø´Ù…Ø§ Ø¯Ø± Ø­Ø§Ù„ Ø§Ù†ØªÙ‚Ø§Ù„ REAL Ø¯Ø± Ø´Ø¨Ú©Ù‡ Ø§ØµÙ„ÛŒ Ù‡Ø³ØªÛŒØ¯. Ø§ÛŒÙ† ØªØ±Ø§Ú©Ù†Ø´ ÙˆØ§Ù‚Ø¹ÛŒ Ø§Ø³Øª Ùˆ Ù‡Ø²ÛŒÙ†Ù‡ Ø¯Ø§Ø±Ø¯. Ø§Ø¯Ø§Ù…Ù‡ Ù…ÛŒâ€ŒØ¯Ù‡ÛŒØ¯ØŸ')) {
                    return;
                }
            }

            showLoading(true, 'Ø¯Ø± Ø­Ø§Ù„ Ø§Ù†Ø¬Ø§Ù… Ø§Ù†ØªÙ‚Ø§Ù„ REAL...');
            try {
                const response = await fetch(`${API_BASE}/transfer/real`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        fromAddress,
                        toAddress,
                        amount,
                        currency,
                        privateKey,
                        networkType
                    })
                });
                const data = await response.json();
                if (data.success) {
                    showAlert(
                        `âœ… Ø§Ù†ØªÙ‚Ø§Ù„ REAL Ù…ÙˆÙÙ‚!<br>
                         ${amount} ${currency} Ø§Ù†ØªÙ‚Ø§Ù„ ÛŒØ§ÙØª<br>
                         <a href="${data.explorerUrl}" target="_blank" style="color: var(--success);">Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø¯Ø± Explorer</a>`,
                        'success'
                    );
                    document.getElementById('toAddress').value = '';
                    document.getElementById('transferAmount').value = '';
                    document.getElementById('privateKey').value = '';
                    loadWalletData();
                } else {
                    throw new Error(data.error);
                }
            } catch (error) {
                showAlert('Ø®Ø·Ø§ Ø¯Ø± Ø§Ù†ØªÙ‚Ø§Ù„ REAL: ' + error.message, 'error');
            }
            showLoading(false);
        }

        async function claimBonus() {
            const address = localStorage.getItem('walletAddress');
            showLoading(true, 'Ø¯Ø±ÛŒØ§ÙØª Ù¾Ø§Ø¯Ø§Ø´ REAL...');
            try {
                const response = await fetch(`${API_BASE}/bonus/claim`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ walletAddress: address })
                });
                const data = await response.json();
                if (data.success) {
                    showAlert('ğŸ‰ Ù¾Ø§Ø¯Ø§Ø´â€ŒÙ‡Ø§ÛŒ REAL Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯!', 'success');
                    loadWalletData();
                } else {
                    throw new Error(data.error);
                }
            } catch (error) {
                showAlert('Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ù¾Ø§Ø¯Ø§Ø´', 'error');
            }
            showLoading(false);
        }

        function showMainSection() {
            document.getElementById('authSection').style.display = 'none';
            document.getElementById('mainSection').style.display = 'block';
        }

        function logout() {
            localStorage.clear();
            document.getElementById('mainSection').style.display = 'none';
            document.getElementById('authSection').style.display = 'block';
        }

        function showLoading(show, text = 'Ø¯Ø± Ø­Ø§Ù„ Ù¾Ø±Ø¯Ø§Ø²Ø´...') {
            const loadingSection = document.getElementById('loadingSection');
            const loadingText = document.getElementById('loadingText');
            loadingText.textContent = text;
            loadingSection.style.display = show ? 'block' : 'none';
        }

        function showAlert(message, type) {
            const container = document.getElementById('alertContainer');
            const alert = document.createElement('div');
            alert.className = `alert alert-${type}`;
            alert.innerHTML = message;
            container.appendChild(alert);
            setTimeout(() => alert.remove(), 8000);
        }

        window.addEventListener('load', () => {
            const address = localStorage.getItem('walletAddress');
            if (address) {
                showMainSection();
                loadWalletData();
            }
        });
    </script>
</body>
</html>
